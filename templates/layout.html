<html>
    <head>
	  <link ... href="{{ url_for('static', filename='styles/fonts.css') }}" type="text/css" rel="stylesheet" />
	  <link ... href="{{ url_for('static', filename='styles/bootstrap.min.css') }}" type="text/css" rel="stylesheet" />
	  <link ... href="{{ url_for('static', filename='styles/style.css') }}" type="text/css" rel="stylesheet" />
	  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	  

            <a class="navbar-brand" href="#" style = "color:brown;">
              <!-- <img src="/docs/4.0/assets/brand/bootstrap-solid.svg" width="30" height="30" class="d-inline-block align-top" alt=""> -->
              
              <!--<img src="{{url_for('static', filename='MT.png')}}" width="100" height="40" class="d-inline-block align-top" alt="" />-->
            <h2 style="padding:20px; margin:10px;"><strong>Solarwinds Orion Interface Configuration</strong></h2>
			<br>
            </a>
          </nav>
    </head>
    <body>
	<br>
		<div class="container" style = "border:1px solid black">
		
		<div id = "alert_pass" style="display:none;" class="alert alert-primary" role="alert">
			Data submitted successfully
		</div>
		<div id = "alert_fail" style="display:none;" class="alert alert-danger" role="alert">
			Some issue occured, Please contact the support team
		</div>
		<form id="myForm" action = " " method="POST">
			<div class="upper">
				<p style = "background-color:gray;padding :10px; margin:5px;"><strong>Match all the selected properties</strong></p>
				<div class="row">
					<div class="col-sm">
						<p><strong>Status</strong></p>
					  <div class="form-check">
						  <input class="form-check-input" name="status1" type="checkbox" value="Up" id="up" checked>
						  <label class="form-check-label" for="up">
							Operationally up
						  </label>
						</div>
						<div class="form-check">
						  <input class="form-check-input" type="checkbox" name="status2" value="Down" id="down" >
						  <label class="form-check-label" for="down">
							Operationally down
						  </label>
						</div>
						<div class="form-check">
						  <input class="form-check-input" type="checkbox" name="status3" value="Shutdown" id="shutdown" >
						  <label class="form-check-label" for="shutdown">
							Administratively shutdown
						  </label>
						</div>
					</div>
					<div class="col-sm">
						<p><strong>Port Mode</strong></p>
					  <div class="form-check">
						  <input class="form-check-input" type="checkbox" name="port_mode1" value="Trunk" id="trunk" checked>
						  <label class="form-check-label" for="trunk">
							Trunk
						  </label>
						</div>
						<div class="form-check">
						  <input class="form-check-input" type="checkbox" name="port_mode2" value="Access" id="access" checked>
						  <label class="form-check-label" for="access">
							Access
						  </label>
						</div>
						<div class="form-check">
						  <input class="form-check-input" type="checkbox" name="port_mode3" value="Unknown" id="unknown" >
						  <label class="form-check-label" for="unknown">
							Unknown
						  </label>
						</div>
					</div>
					<div class="col-sm">
						<p><strong>Hardware</strong></p>
					  <div class="form-check">
						  <input class="form-check-input" type="checkbox" name="hardware1" value="Physical" id="physical" checked>
						  <label class="form-check-label" for="physical">
							Physical
						  </label>
						</div>
						<div class="form-check">
						  <input class="form-check-input" type="checkbox" name="hardware2" value="Virtual" id="virtual" checked>
						  <label class="form-check-label" for="virtual">
							Virtual
						  </label>
						</div>
						<div class="form-check">
						  <input class="form-check-input" type="checkbox" name="hardware3" value="Unknown" id="unknown2" >
						  <label class="form-check-label" for="unknown2">
							Unknown
						  </label>
						</div>
					</div>
				</div>
			</div>
			<br>
			<div class="lower">
				<p style = "background-color:gray;padding :10px; margin:5px;"><strong>Match all the selected properties</strong></p>
				<div class="row g-3">
					  <div class="col-sm">
						<select class="form-select form-control" name="prop" id="prop" aria-label="Default select example">
							<option value="Type">Interface Type</option>
							<option value="Name">Interface Name</option>
							<option value="Descr">Interface Description</option>
							<option value="Alias">Interface Alias</option>
							<option value="Node">Node Name</option>
							<option value="All">All columns</option>
							<option value="Vlan">VLAN ID</option>
						</select>
					  </div>
					  <div class="col-sm">
						<select class="form-select form-control" name="op" id="op" aria-label="Default select example">
						  <option value="Any">contains any keywords</option>
							<option value="All">contains all keywords</option>
							<option value="Equals">contains exact phrase</option>
							<option value="!Equals">does not contain any keywords does not contain exact phrase</option>
							<option value="!All">does not contain all keywords</option>
							<option value="Regex">matches regular expression</option>
							<option value="!Regex">does not match regular expression</option>
						</select>
					  </div>
					  <div class="col-sm">
						<input type="text" class="form-control" name="val" id="val" placeholder="Value" aria-label="value">
					  </div>
					  
					  <div class="col-sm-1">
					
						  
						  <svg  xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-plus-square" viewBox="0 0 16 16">
						  <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
						  <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"/>
						</svg> 
					  </div> 
					</div>
			</div>
			<br>
<table class="table" id ="mytable" style = "display:none;">
  <thead>
    <tr>
      <th scope="col">Property</th>
      <th scope="col">Operation</th>
      <th scope="col">Value</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
			<br>
			<div class="col-12">
				<button type="submit" class="btn btn-primary"  id ="submitBtn">Submit</button>
			</div>
			</form>
			</br>
			</br>
		</div>
	<script src="{{url_for('static', filename='js/jquery.js')}}"></script>
	<script src="{{url_for('static', filename='js/popper.min.js')}}"></script>
	<script src="{{url_for('static', filename='js/bootstrap.min.js')}}"></script>
		
		<script>
		 my_form_Data = [];
		 
		let svg = '<svg style="" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="red" class="bi bi-dash-square" viewBox="0 0 16 16">\
			<path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>\
			<path d="M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"/></svg>'


		$(document).ready(function(){
			$(".bi-plus-square").click(function(){
			var prop = $( "#prop" ).val();
			var ip = $( "#op" ).val();
			var val = $( "#val" ).val();
			console.log(prop)
			console.log(op)
			console.log(val)
			
		$('#mytable tbody tr').remove();
		var data = {}
		var x = $('#myForm').serializeArray()
		$.each(x, function(i, field) { 
					$("#output").show()
					data[field.name] = field.value
        }); 
		
		
		my_form_Data.push(data)
		document.getElementById("myForm").reset()
		console.log(my_form_Data)
		
			for ($i = 0;$i<my_form_Data.length; $i++){
				<!-- $('#output').append(my_form_Data[$i]['IP_Address'] + ' '+ my_form_Data[$i]['Orion_Engine_Name']) -->
				$('#output').append(svg);
				$("#mytable").show();
				var table = document.getElementById("mytable");
				var markup = "<tr id ="+my_form_Data[$i]['prop']+my_form_Data[$i]['val']+" ><td>" + my_form_Data[$i]['prop'] + "</td><td>" + my_form_Data[$i]['op'] + "</td><td>" + my_form_Data[$i]['val'] + "</td><td>"+svg+"</td></tr>";
				$("table tbody").append(markup);
			}
			});
		});




$('#mytable').on('click', function(e){
var id = $(e.target).closest('svg').parent().parent().attr('id')
<!-- console.log(id) -->


for ($i = 0;$i<my_form_Data.length; $i++){

	if (my_form_Data[$i]['prop']+my_form_Data[$i]['val'] === id){
		my_form_Data.splice($i,1);
	}

}
$('#mytable tbody tr').remove();
	for ($i = 0;$i<my_form_Data.length; $i++){
		<!-- $('#output').append(my_form_Data[$i]['IP_Address'] + ' '+ my_form_Data[$i]['PollingEngine']) -->
		$('#output').append(svg);
		$("#mytable").show();
		var table = document.getElementById("mytable");
		var markup = "<tr id ="+my_form_Data[$i]['prop']+my_form_Data[$i]['val']+" ><td>" + my_form_Data[$i]['prop'] + "</td><td>" + my_form_Data[$i]['op'] + "</td><td>" + my_form_Data[$i]['val'] + "</td><td>"+svg+"</td></tr>";
		$("table tbody").append(markup);
	}
console.log(my_form_Data)


})

	
  $(document).ready(function(){
    $("#submitBtn").click(function(){  
	if (my_form_Data.length < 1){
		alert('Please provide some details before submitting.')
	}else{
		console.log(my_form_Data)
		<!-- alert('Request Submitted Successfully.') -->
		$("#alert_pass").text('Request Submitted Successfully.')
		$("#alert_pass").show()
		document.getElementById("myForm").reset()
		$.ajax({
			url: '/onboardFD'
		,   type: 'POST'
		,   contentType: 'application/json'
		,   data: JSON.stringify(my_form_Data) //stringify is important
		<!-- ,   success: _madeSave.bind(this) -->
		, success: function(dataa){
			console.log(dataa)
			if (dataa["status"] == "pass"){
				$(document).ready(function(){
					alert("Data submitted successfully")
					$('#alert_pass').show();
				});
			}else
			{
			
				$(document).ready(function(){
				$('#alert_fail').show();
				alert("Some issue occured while submitting, Please contact the support team")
				});
			}
		}
		
		});
		$('#mytable tbody tr').remove();
		my_form_Data = [];
		console.log('Clearing the Array');
        <!-- $("#myForm").submit(); // Submit the form -->
		
		}
    });
});



		</script>
	</body>